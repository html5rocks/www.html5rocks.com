window.tuts={feed:undefined,feeddfr:$.Deferred(),authors:undefined,tmpl:undefined,classToTag:{offline:["appcache"],storage:["indexeddb"],connectivity:["xhr2","websockets"],file_access:["filesystem","file","quota"],semantics:[],multimedia:["webaudio","video","media source"],graphics:["webgl","3d"],presentation:["css","css3"],performance:["workers"],nuts_and_bolts:["devtools"],},feedsapi:function(){var a=new google.feeds.Feed("http://updates.html5rocks.com/feeds/atom.xml");a.setNumEntries(100);a.load(function(b){tuts.feed=b.feed;tuts.feeddfr.resolve()})},init:function(){$("#filter a").click(clearFilter);var c="https://www.google.com/jsapi?autoload=%7B%22modules%22%3A%5B%7B%22name%22%3A%22feeds%22%2C%22version%22%3A%221%22%2C%22callback%22%3A%22tuts.feedsapi%22%7D%5D%7D";$.getScript(c);var b=$.ajax({url:"/api/authors",dataType:"json",localCache:true,success:function(d){tuts.authors=d}});var a=$.ajax({url:"/static/js/tutstmpl.html",dataType:"text",localCache:true,success:function(d){tuts.tmpl=Handlebars.compile(d)}});$.when(tuts.feeddfr.promise(),b,a).done(tuts.compile)},compile:function(){tuts.normalize();var a=tuts.tmpl({updates:tuts.feed.entries});$("#index").append(a);tuts.resort()},normalize:function(){tuts.feed.entries=tuts.feed.entries.map(function(g){if(g.author=="ebidelman"){g.author="ericbidelman"}var c=tuts.authors[g.author];g.fullname=c.given_name+" "+c.family_name;var b=["January","February","March","April","May","June","July","August","September","October","November","December"];var d=new Date(g.publishedDate);g.date=d.toJSON().split("T")[0];g.formattedDateStr=b[d.getMonth()].slice(0,3)+". "+d.getDate()+", "+d.getFullYear();g.categories=g.categories.map(function(i){return i.replace(/,/g,"").trim()});g.tags=g.categories.join(", ");var h={};g.classes=[];for(var f=0,a=g.categories.length;cat=g.categories[f],f<a;f++){for(var e in tuts.classToTag){if(e==cat){g.categories.splice(f,1);h[e]=true}}}g.classes=Object.keys(h);return g})},resort:function(){var a=$(".tutorial_listing");a=a.each(function(c,d){var b=new Date(d.getAttribute("data-pubdate"));$.data(d,"date",b)}).get().sort(function(d,c){return $.data(d,"date")>$.data(c,"date")?-1:1});$(a).appendTo("#index");if(typeof initPage==="function"){initPage()}}};function clearFilter(){$(".tutorial_listing.hidden").removeClass("hidden");$("#updates_tag_filter").val("");$('section.filter input[type="checkbox"]').attr("checked",false);$("#filter").parent().addClass("hidden");if(!!window.history){var a=document.documentElement.lang||"en";history.replaceState({},document.title,"/"+a+"/tutorials/")}else{window.location.hash=""}return false}function initializeFilters(b){var c=[];b.toLowerCase().split(",").forEach(function(d,e){var f=d.split(":");if(f.length==2){var g=' input[value="'+f[1]+'"]';switch(f[0]){case"type":$("#updates_format_filter"+g).attr("checked",true);break;case"audience":$("#updates_audience_filter"+g).attr("checked",true);break;case"technology":$("#updates_technology_filter"+g).attr("checked",true);break;default:break}}else{c.push(f[0])}});if(c.length){var a=$("#updates_tag_filter")[0];if(a.value){a.value+=","}a.value+=c.join(",")}}tuts.init();